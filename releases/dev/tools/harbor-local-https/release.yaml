# apiVersion: source.toolkit.fluxcd.io/v1beta2
# kind: OCIRepository
# metadata:
#   name: harbor-local-v1
#   namespace: flux-system
# spec:
#   interval: 10m
#   layerSelector:
#     mediaType: "application/vnd.cncf.helm.chart.content.v1.tar+gzip"
#     operation: copy
#   url: oci://registry-1.docker.io/bitnamicharts/harbor
#   ref:
#     tag: "24.3.0"
# ---
# apiVersion: helm.toolkit.fluxcd.io/v2
# kind: HelmRelease
# metadata:
#   name: harbor-local-v1
#   namespace: internal
# spec:
#   releaseName: harbor-local-v1
#   interval: 5m
#   chartRef:
#     kind: OCIRepository
#     name: harbor-local-v1
#     namespace: flux-system
#   values:
#     proxy:
#       httpProxy: "http://10.70.0.45:31002"
#       httpsProxy: "https://10.70.0.45:31003"
#     externalURL: https://10.70.0.45:31003
#     adminPassword: "Harbor12345"
#     exposureType: proxy
#     internalTLS:
#       enabled: true
#     service:
#       type: NodePort
#       ports:
#         http: 80
#         https: 443
#       nodePorts:
#         http: "31002"
#         https: "31003"
#     nginx:
#       tls:
#         commonName: 10.70.0.45:31003
#       resourcesPreset: nano
#     portal:
#       resourcesPreset: nano
#     core:
#       resourcesPreset: nano
#     jobservice:
#       resourcesPreset: nano
#     registry:
#       server:
#         resourcesPreset: nano
#       controller:
#         resourcesPreset: nano
#     trivy:
#       resourcesPreset: nano